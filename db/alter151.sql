UPDATE scoring_versions SET scoring = '{"main":[{"matter":2,"points":1}],"extra":[{"matter":4194304,"points":"bonus()"},{"matter":1,"points":"matter(24) ? 0 : 0.3"}],"legacy":[{"matter":1,"points":"matter(10) ? 0.7 : (matter(11) ? 0.5 : 0)","roles":3}],"penalty":[{"matter":1,"points":"matter(12) || matter(13) || matter(14) ? -0.5 : (matter(25) ? -0.7 : 0)"}],"night1":[{"matter":260,"roles":3,"points":"max(min(counter(0,1)*0.5/round(counter(0,0)*0.4),0.5),0)"}],"counters":[{"matter":1},{"matter":256,"roles":3}]}' WHERE scoring_id = 19 AND version = 7;
UPDATE scoring_versions SET scoring = '{"main":[{"matter":2,"points":1}],"extra":[{"matter":4194304,"points":"bonus()"},{"matter":1,"points":"matter(24) ? 0 : 0.3"}],"legacy":[{"matter":1,"points":"matter(10) ? 0.7 : (matter(11) ? 0.5 : 0)","roles":3}],"penalty":[{"matter":1,"points":"matter(12) || matter(13) || matter(14) ? -0.5 : (matter(25) ? -0.7 : 0)"}],"night1":[{"matter":260,"roles":3,"points":"max(min(counter(0,1)*0.4/round(counter(0,0)*0.4),0.4),0)"}],"counters":[{"matter":1},{"matter":256,"roles":3}]}' WHERE scoring_id = 19 AND version = 6;
UPDATE scoring_versions SET scoring = '{"main":[{"matter":2,"points":1}],"extra":[{"matter":4194304,"points":"bonus()"},{"matter":1,"points":"matter(24) ? 0 : 0.3"}],"legacy":[{"matter":1,"points":"matter(10) ? 0.5 : (matter(11) ? 0.3 : 0)","roles":3}],"penalty":[{"matter":1,"points":"matter(12) || matter(13) || matter(14) ? -0.5 : (matter(25) ? -0.7 : 0)"}],"night1":[{"matter":260,"roles":3,"points":"max(min(counter(0,1)*0.4/round(counter(0,0)*0.4),0.4),0)"}],"counters":[{"matter":1},{"matter":256,"roles":3}]}' WHERE scoring_id = 19 AND version = 5;
UPDATE scoring_versions SET scoring = '{"main":[{"matter":2,"points":1}],"extra":[{"matter":4194304,"points":"bonus()"},{"matter":1,"points":0.3}],"legacy":[{"matter":1,"points":"matter(10) ? 0.5 : (matter(11) ? 0.3 : 0)","roles":3}],"penalty":[{"matter":1,"points":"matter(12) || matter(13) || matter(14) ? -0.5 : 0"}],"night1":[{"matter":260,"roles":3,"points":"max(min(counter(0,1)*0.4/round(counter(0,0)*0.4),0.4),0)"}],"counters":[{"matter":1},{"matter":256,"roles":3}]}' WHERE scoring_id = 19 AND version = 4;
UPDATE scoring_versions SET scoring = '{"main":[{"matter":2,"points":1}],"extra":[{"matter":4194304,"points":"bonus()"}],"legacy":[{"matter":1,"points":"matter(10) ? 0.4 : (matter(11) ? 0.25 : 0)","roles":3}],"penalty":[{"matter":1,"points":"matter(12) || matter(13) || matter(14) ? -0.5 : 0"}],"night1":[{"matter":260,"roles":3,"points":"max(min(counter(0,1)*0.4/round(counter(0,0)*0.4),0.4),0)"}],"counters":[{"matter":1},{"matter":256,"roles":3}]}' WHERE scoring_id = 19 AND version = 3;
UPDATE scoring_versions SET scoring = '{"main":[{"matter":2,"points":1}],"extra":[{"matter":4194304,"points":"bonus()"}],"legacy":[{"matter":1,"points":"matter(10) ? 0.4 : (matter(11) ? 0.25 : 0)","roles":3}],"penalty":[{"matter":1,"points":"matter(12) || matter(13) ? -0.5 : 0"}],"night1":[{"matter":260,"roles":3,"points":"max(min(counter(0,1)*0.4/round(counter(0,0)*0.4),0.4),0)"}],"counters":[{"matter":1},{"matter":256,"roles":3}]}' WHERE scoring_id = 19 AND version = 2;
UPDATE scoring_versions SET scoring = '{"main":[{"matter":2,"points":"difficulty() > 0.5 ? difficulty() * 2 : 1"}],"extra":[{"matter":4194304,"points":"bonus()"}],"legacy":[{"matter":1,"points":"matter(10) ? 0.4 : (matter(11) ? 0.25 : 0)","roles":3}],"penalty":[{"matter":1,"points":"matter(12) || matter(13) ? -0.5 : 0"}],"night1":[{"matter":260,"roles":3,"points":"max(min(counter(0,1)*0.4/round(counter(0,0)*0.4),0.4),0)"}],"counters":[{"matter":1},{"matter":256,"roles":3}]}' WHERE scoring_id = 19 AND version = 1;
UPDATE scoring_versions SET scoring = '{"main":[{"matter":2,"points":"difficulty() > 0.5 ? difficulty() * 2 : 1"},{"matter":2,"roles":10,"points":0.05},{"matter":4,"roles":10,"points":-0.05}],"legacy":[{"matter":1024,"roles":3,"points":0.2},{"matter":2048,"roles":3,"points":0.1}],"extra":[{"matter":16,"points":-0.1},{"matter":32,"points":0.3},{"matter":64,"points":0.2},{"matter":262144,"roles":8,"points":0.05},{"matter":1048576,"roles":2,"points":0.1}],"penalty":[{"matter":4096,"points":-0.2},{"matter":8192,"points":-0.4}],"night1":[{"matter":256,"roles":3,"points":"max(min(counter(0,1)*1.2/counter(0,0)-0.18,0.3),0)"}],"counters":[{"matter":1},{"matter":256,"roles":3}]}' WHERE scoring_id = 21 AND version = 2;
UPDATE scoring_versions SET scoring = '{"main":[{"matter":2,"points":1}],"extra":[{"matter":4194304,"points":0.3},{"matter":8,"points":0.3},{"matter":32,"points":0.1},{"matter":32768,"points":0.3,"roles":1},{"matter":524288,"points":0.3,"roles":8},{"matter":4194304,"points":0.2},{"matter":4194304,"points":0.1},{"matter":1,"points":0}],"legacy":[{"matter":1024,"roles":3,"points":0.5},{"matter":2048,"roles":3,"points":0.3}],"penalty":[{"matter":4096,"points":-0.5},{"matter":8192,"points":-0.5},{"matter":16384,"points":-0.5},{"matter":33554432,"points":-0.5},{"matter":65536,"points":-0.2,"roles":3}]}' WHERE scoring_id = 32 AND version = 1;
UPDATE scoring_versions SET scoring = '{"main":[{"matter":1,"points":"matter(1) ? 4 : 1"}],"legacy":[{"matter":256,"points":"matter(11) ? 0.5 : (matter(10) ? (role() == 1 ? 0.5 : 1) : 0)","roles":3}],"penalty":[{"matter":1,"points":"matter(12) || matter(13) ? -1.5 : 0"}],"sorting":"meswg","extra":[{"matter":4194304,"points":"bonus()"}],"night1":[{"matter":260,"points":"min(max(counter(1,0)-1,0),3)","roles":3}],"counters":[{"matter":260,"roles":3}]}' WHERE scoring_id = 33 AND version = 1;
UPDATE scoring_versions SET scoring = '{"main":[{"matter":2,"points":1}],"legacy":[{"matter":1,"points":"matter(10) ? 0.5 : (matter(11) ? 0.3 : 0)"}],"extra":[{"matter":4194304,"points":"bonus()"}],"penalty":[{"matter":1,"points":"matter(12) || matter(13) ? -0.5 : (matter(25) ? -0.7 : 0)"}],"night1":[{"matter":260,"roles":3,"points":"min(max(counter(0,1)/counter(0,0),0),0.4)"}],"counters":[{"matter":1},{"matter":256,"roles":3}]}' WHERE scoring_id = 37 AND version = 1;
UPDATE scoring_versions SET scoring = '{"main":[{"matter":2,"points":1}],"extra":[{"matter":4194304,"points":"bonus()"},{"matter":16777216,"points":-0.3}],"legacy":[{"matter":256,"points":"matter(10) ? 0.7 : (matter(11) ? 0.5 : 0)","roles":3}],"penalty":[{"matter":1,"points":"matter(12) || matter(13) || matter(14) ? -0.5 : (matter(25) ? -0.7 : 0)"}],"night1":[{"matter":260,"roles":3,"points":"max(min(counter(0,1)*0.5/round(counter(0,0)*0.4),0.5),0)"}],"counters":[{"matter":1},{"matter":256,"roles":3}]}' WHERE scoring_id = 39 AND version = 1;

UPDATE events SET scoring_version = 1 WHERE scoring_id = 33 AND scoring_version = 2;
UPDATE tournaments SET scoring_version = 1 WHERE scoring_id = 33 AND scoring_version = 2;
UPDATE scorings SET version = 1 WHERE id = 33;
DELETE FROM scoring_versions WHERE scoring_id = 33 AND version = 2;

DELETE event_extra_points FROM event_extra_points JOIN events ON events.id = event_extra_points.event_id WHERE events.scoring_id = 33;
